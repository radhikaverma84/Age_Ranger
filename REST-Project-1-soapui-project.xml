<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="d9a6a8f0-3d55-4464-b37b-370452baa708" activeEnvironment="Default" name="REST Project 1" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="c2032d0b-5777-4387-9916-022ed5ae6bc7" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://ageranger.azurewebsites.net" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint></con:endpoints><con:resource name="Swagger" path="/api/AgeRanger/GetAllPeople" id="2f3b6880-545e-41ea-850a-5597d48df46c"><con:settings/><con:parameters/><con:method name="Swagger 1" id="050fefaf-c579-4efa-9613-e0ff3d9dafa4" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="All_People" id="e74c389c-e3a7-48b5-b59a-d8c052b8b1ea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:originalUri>http://ageranger.azurewebsites.net/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="/api/AgeRanger/GetAllAgeGroups" id="f5c2d625-b132-4859-9021-80765bf3159a"><con:settings/><con:parameters/><con:method name="Method 1" id="8d701f8b-ab70-4665-89b1-329384f5d1bd" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="e4dd1864-d5eb-4510-a678-9d2dee2f92d6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:originalUri>http://ageranger.azurewebsites.net/api/AgeRanger/GetAllAgeGroups</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="swagger" path="/api/AgeRanger/UpdatePerson" id="962ca4af-6dff-4290-b10a-d9b6fc4fbb05"><con:settings/><con:parameters><con:parameter><con:name>Id</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>Id</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="Method 1" id="d171ba7d-9513-40b5-8107-065b79026cbe" method="PUT"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/plain; charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="7eff0a5d-8b51-4785-a0f9-59b8c915645a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Age" value=""/>
  &lt;con:entry key="FirstName" value=""/>
  &lt;con:entry key="LastName" value=""/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Id</con:entry><con:entry/></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b8a840e6-08d9-463c-b49e-fb390fc0d240" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://ageranger.azurewebsites.net" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint></con:endpoints><con:resource name="Swagger" path="/api/AgeRanger/AddPerson" id="2f895408-57b0-412f-b868-70d8727773f8"><con:settings/><con:parameters/><con:method name="Swagger 1" id="7706bae6-efa3-4dbb-b20f-617cc12701c6" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="e35b308d-42ca-48e9-a0e1-43b661f37a65" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="a3a18e05-909f-411a-8478-df31ae3dac6f" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://ageranger.azurewebsites.net" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint></con:endpoints><con:resource name="" path="/api/AgeRanger/DeletePerson/{id}" id="0e894398-ff1f-4698-b2e6-021583983274"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="1" id="c3b886d8-d685-447d-b9da-885a64e52497" method="DELETE"><con:settings/><con:parameters/><con:request name="Request 1" id="011dd2d1-bd53-428f-a282-5b50572f8059" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="ea27cf8a-dbed-4a69-bbe7-6b8a9928fd64" name="Age_Ranger"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5cbc0e66-2959-48e5-bfb1-99286b28980a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get_details" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Get_All_People_details" id="24d3d4ce-2e26-41ec-9939-f5806728e77f"><con:settings/><con:config service="http://ageranger.azurewebsites.net" methodName="Swagger 1" resourcePath="/api/AgeRanger/GetAllPeople" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get_All_People_details" id="69bba2ef-1eb9-4e46-acd2-ec553ccc20b1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:originalUri>http://ageranger.azurewebsites.net/api/AgeRanger/GetAllPeople</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a5e58e1a-56bb-41a4-9a30-5d990af4be54" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6a650663-787a-4d64-ac63-f894688acae3" name="Contains"><con:configuration><token>Id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d76bad11-5c4b-41a5-8467-835065e108f4" name="FirstName"><con:configuration><token>FirstName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a985135-344f-480f-92d3-64822f3f9186" name="LastName"><con:configuration><token>LastName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e3f70ae6-5582-451e-a4ea-320837146dc7" name="Age"><con:configuration><token>Age</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f6f96bd4-ccc8-4803-82cc-d4082535e9de" name="AgeGroup"><con:configuration><token>AgeGroup</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get_All_Age_Group" id="ea2e7eaf-dc13-4193-ae5e-9930c1b80217"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/GetAllAgeGroups" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get_All_Age_Group" id="e4dd1864-d5eb-4510-a678-9d2dee2f92d6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:originalUri>http://ageranger.azurewebsites.net/api/AgeRanger/GetAllAgeGroups</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c9ce956f-774c-4ab1-80eb-1c3bdf34468a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d1c61958-edfd-4e1b-b4b5-6e2a92f601ba" name="Contains"><con:configuration><token>Id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="64d13814-331b-4a37-8920-ca9dd8edb020" name="MinAge"><con:configuration><token>MinAge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="79beb602-5a08-48eb-ae95-c3f76f60a065" name="MaxAge"><con:configuration><token>MaxAge</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="fe11ed67-4759-42c6-a930-13a28fb5c9f3" name="Description"><con:configuration><token>Description</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e8d90154-3cc8-46d7-8cc0-ccc2eb07d1ee" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update_Person" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Update_First_Name" id="7c2a62e9-99f6-4f6b-918c-5ab5d7ab59fa"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/UpdatePerson" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update_First_Name" id="7eff0a5d-8b51-4785-a0f9-59b8c915645a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Content-Type" value="application/json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}
</con:request><con:originalUri>http://ageranger.azurewebsites.net/api/AgeRanger/UpdatePerson</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="67c069db-3dc9-46fd-8168-0e2061d34211" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0ccfdda7-a13e-4f3f-8f7b-a309c50bb4b8" name="Script Assertion"><con:configuration><scriptText>//Assertion to verify if Request/response are not null

@groovy.transform.Canonical
@groovy.transform.Sortable
class Model {
  String desc
  String details
}

def searchData = { data, element ->
  def parsedData = new XmlSlurper().parseText(data)
  parsedData.'**'.findAll{it.id() == element}
}

//Closure to build the object list of above provided Model class
def buildData = { list, desc, details ->
   def objects = []
   list.each { item ->
      objects &lt;&lt; new Model(desc: item."$desc", details: item."$details")
   }
   objects
}

//Assert if the request and response are non-empty
assert context.rawRequest, "Request is empty or null"
assert context.response, "Response is empty or null"

//Get the Value elements from both request and response
def reqValues = searchData(context.rawRequest, 'Value')
def respValues = searchData(context.response, 'Value')

//Log the above
log.info "Value objects from request: ${reqObjectList.toString()}"
log.info "Value objects from response: ${resObjectList.toString()}"
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="a249c312-5b55-476d-8877-9995ba8238b6" disabled="true"><con:settings/><con:config><script>import groovy.sql.Sql;
 
// Get db connection parameters: dbUrl, dbUName, dbPwd.
//def dbUrl = "jdbc:db_ipaddress/port"
//def dbUName = "db_username"
//def dbPwd = "db_pwd"
//def dbDriver ="db_driver"


//Read db configuration data from Project Property
dbUrl = testRunner.testCase.testSuite.project.getPropertyValue( 'dbUrl');
dbUName = testRunner.testCase.testSuite.project.getPropertyValue( 'dbUName');
dbPwd = testRunner.testCase.testSuite.project.getPropertyValue( 'dbPwd');
dbDriver = testRunner.testCase.testSuite.project.getPropertyValue( 'dbDriver');

// register db2 JDBC driver
com.eviware.soapui.support.GroovyUtils.registerJdbcDriver(dbDriver);
def  con = Sql.newInstance(dbUrl, dbUName, dbPwd, dbDriver);

//Read person data from Test Case Property
def FirstName = testRunner.testCase.getPropertyValue('FirstName');
def LastName = testRunner.testCase.getPropertyValue('LastName');
def Age = testRunner.testCase.getPropertyValue('Age');
def Id = testRunner.testCase.testSuite.getPropertyValue('Id');

sql = "Select * from &lt;Table_Name> where id = '"id.toInteger()+"')"

log.info sql
con.executeUpdate(sql);
</script></con:config></con:testStep><con:testStep type="restrequest" name="Get_All_People_details" id="6ab360d6-cb2c-410b-9662-c051fe1c1b67"><con:settings/><con:config service="http://ageranger.azurewebsites.net" methodName="Swagger 1" resourcePath="/api/AgeRanger/GetAllPeople" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get_All_People_details" id="69bba2ef-1eb9-4e46-acd2-ec553ccc20b1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Id" value="${#TestSuite#Id} " xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:originalUri>http://ageranger.azurewebsites.net/api/AgeRanger/GetAllPeople</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a5e58e1a-56bb-41a4-9a30-5d990af4be54" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6a650663-787a-4d64-ac63-f894688acae3" name="Contains"><con:configuration><token>Id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d76bad11-5c4b-41a5-8467-835065e108f4" name="FirstName"><con:configuration><token>FirstName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a985135-344f-480f-92d3-64822f3f9186" name="LastName"><con:configuration><token>LastName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e3f70ae6-5582-451e-a4ea-320837146dc7" name="Age"><con:configuration><token>Age</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f6f96bd4-ccc8-4803-82cc-d4082535e9de" name="AgeGroup"><con:configuration><token>AgeGroup</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Id_Exception_Not_found" id="67861428-13e5-41e1-9a90-f5ddb6761ad1"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/UpdatePerson" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Id_Exception_Not_found" id="7eff0a5d-8b51-4785-a0f9-59b8c915645a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}</con:request><con:assertion type="Valid HTTP Status Codes" id="bef2644a-e566-4905-9388-bc2d50506b60" name="Valid HTTP Status Codes"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b06ad3bb-23cc-4048-a7d8-ea8823015260" name="Contains"><con:configuration><token>InvalidId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Id</con:entry><con:entry/></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Details_Already_exists_exception" id="d5e87dd8-7f17-4f39-aa32-86806a90ec7c"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/UpdatePerson" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Details_Already_exists_exception" id="7eff0a5d-8b51-4785-a0f9-59b8c915645a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="content-type" value="" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}</con:request><con:assertion type="Valid HTTP Status Codes" id="b59c7a2d-14b9-4572-a68f-177a9abea4e2" name="Valid HTTP Status Codes"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="12cd90b1-48b5-4d29-8b51-7fa0d9aa1cc9" name="Contains"><con:configuration><token>AlreadyExists</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="Id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Id</con:entry><con:entry/></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>FirstName</con:name><con:value/></con:property><con:property><con:name>LastName</con:name><con:value/></con:property><con:property><con:name>Age</con:name><con:value/></con:property></con:properties></con:testCase><con:testCase id="f2ac705e-b17b-4bca-ad86-07917fc2eae0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add_New_Person" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Add_New_Person" id="0c4bfeb4-ac43-4940-9646-8487d7d7ec66"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/AddPerson" methodName="Swagger 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Add_New_Person" id="e35b308d-42ca-48e9-a0e1-43b661f37a65" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Id" value="${#TestCase#newId}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}</con:request><con:assertion type="Valid HTTP Status Codes" id="af1d73dd-e0c5-4f4b-bd93-5f7c71b298f2" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6d55ecbf-a892-44ff-829c-2769e123b33d" name="Script Assertion"><con:configuration/></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="88796e0b-48a5-44b5-99d0-9c9a9f768b52"><con:settings/><con:config><script>import groovy.sql.Sql;
 
// Get db connection parameters: dbUrl, dbUName, dbPwd.
//def dbUrl = "jdbc:db_ipaddress/port"
//def dbUName = "db_username"
//def dbPwd = "db_pwd"
//def dbDriver ="db_driver"


//Read db configuration data from Project Property
dbUrl = testRunner.testCase.testSuite.project.getPropertyValue( 'dbUrl');
dbUName = testRunner.testCase.testSuite.project.getPropertyValue( 'dbUName');
dbPwd = testRunner.testCase.testSuite.project.getPropertyValue( 'dbPwd');
dbDriver = testRunner.testCase.testSuite.project.getPropertyValue( 'dbDriver');

// register db2 JDBC driver
com.eviware.soapui.support.GroovyUtils.registerJdbcDriver(dbDriver);
def  con = Sql.newInstance(dbUrl, dbUName, dbPwd, dbDriver);

//Read person data from Test Case Property
def FirstName = testRunner.testCase.getPropertyValue('FirstName');
def LastName = testRunner.testCase.getPropertyValue('LastName');
def Age = testRunner.testCase.getPropertyValue('Age');
def Id = testRunner.testCase.testSuite.getPropertyValue('Id');

//assume Table1- Id,Firstname, Lastname,Age, Age_group
//table 2 - MinAge,MaxAge,Age_group
con.executeUpdate "update table1 set table1.Agegroup In (Select table2.Agegroup from table2 where Age ='"Age.toString >= table2.minage and Age ='"Age.toString &lt; table2.maxage+"'")";  '"id.toInteger()+"')"
</script></con:config></con:testStep><con:testStep type="restrequest" name="Get_User_details" id="4d94a24d-3243-4967-867a-3f42089d9e96"><con:settings/><con:config service="http://ageranger.azurewebsites.net" methodName="Swagger 1" resourcePath="/api/AgeRanger/GetAllPeople" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get_User_details" id="16f75974-d59a-4468-9572-cdcb42d87988" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="FirstName" value="${#TestCase#newFirstName}"/>
  &lt;con:entry key="LastName" value="${#TestCase#LastName}"/>
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="afc99d14-b053-4cf2-8ffd-2b71b79eb233" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8168d5fb-db09-4287-9db2-7aaad1a9fbe7" name="Contains"><con:configuration><token>Id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7bb24671-cdd0-40f2-8432-f99b1ebe9252" name="FirstName"><con:configuration><token>FirstName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ac1912a-4983-4546-8249-884534a467fc" name="LastName"><con:configuration><token>LastName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="84f47ba6-767a-4b32-8a60-0ffe6f551bf6" name="Age"><con:configuration><token>Age</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="33a13cf9-4b74-4020-837c-22c84d153baa" name="Age_Group"><con:configuration><token>Age_Group</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Duplicate_Id_Exception" id="0b3f6d45-3290-44ed-b992-5b3cf6fc2863"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/AddPerson" methodName="Swagger 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Duplicate_Id_Exception" id="e35b308d-42ca-48e9-a0e1-43b661f37a65" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request>{
	"FirstName": ${#TestCase#FirstName},
	"LastName": ${#TestCase#LastName},
	"Age": ${#TestCase#AgeName}
}</con:request><con:assertion type="Valid HTTP Status Codes" id="ce46ec18-bf72-41c2-bfac-6ed182ce3704" name="Valid HTTP Status Codes"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2932e187-0c4b-42dd-9fc6-13d75b142bbc" name="Contains"><con:configuration><token>DuplicateId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>newId</con:name><con:value>${=System.currentTimeMillis()}${=System.currentTimeMillis()}${=((int)Math.random()*10)+1000006}4568</con:value></con:property><con:property><con:name>newFirstName</con:name><con:value/></con:property><con:property><con:name>newLastName</con:name><con:value/></con:property></con:properties></con:testCase><con:testCase id="3a520b5e-3003-4080-abd6-825257e9749e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Delete_Person" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Delete_Person_details" id="027d6f3d-bf66-421a-b878-05aa3085daca"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/DeletePerson/{id}" methodName="1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Delete_Person_details" id="011dd2d1-bd53-428f-a282-5b50572f8059" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="bba754d1-cde3-42c8-85cd-a82b40b0c28f" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Delete_Exception_Invalid_Id" id="452dcb30-c576-4224-9d75-26624aeb99ed"><con:settings/><con:config service="http://ageranger.azurewebsites.net" resourcePath="/api/AgeRanger/DeletePerson/{id}" methodName="1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Delete_Exception_Invalid_Id" id="011dd2d1-bd53-428f-a282-5b50572f8059" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://ageranger.azurewebsites.net</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="cf850f6b-b3e1-4140-89f2-1e98b4590c64" name="Valid HTTP Status Codes"><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bd08fb5b-079b-4e06-9398-add46c04b45b" name="Contains"><con:configuration><token>Invalid_Id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestSuite#Id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>Id</con:name><con:value/></con:property></con:properties></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>